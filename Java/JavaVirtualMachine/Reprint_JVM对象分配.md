原文: https://www.jianshu.com/p/990be3c62993

# 对象分配通有流程

对象的分配流程如下图：

![img](./Reprint_JVM对象分配_img/6763914-34de9e3b9cfe61cd.webp)

1. 判断对象是否已经加载，如果已经加载，执行步骤 3，否则执行步骤 2
2. 通过类加载器加载类的字节码文件，对字节码文件进行验证、准备、解析等操作，进入步骤 3
3. 为对象分配内存空间，首先尝试在TLAB空间分配对象，如果分配失败，在eden空间分配
4. 在eden空间分配对象，如果分配成功则对对象进行初始化，并将对象引用赋给变量，如果分配失败则触发GC，进行垃圾回收，对内存空间进行回收以后，重新尝试对象的分配。

以上是对象分配的通有流程，但是在采用不同垃圾回收器的情况下，对象的分配流程有所差异，下面我们来研究一下在使用G1的情况下，对象分配的流程是怎么样的。

